<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Interactive map</title>
<link href="style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js" type="text/javascript"></script>
<script src="js/HelperGoogleMap.js" type="text/javascript"></script>
<script src="js/HelperListFilter.js" type="text/javascript"></script>


<script> 
$(document).ready(function() {
	var usamap = new HelperGoogleMap();
	
	usamap.getAddress = function(){
		var saveAddr = [];
		$(".getMap").each(function(){
			if($(this).css("display") != "none"){
				var title = $(this).find("a").html();
				var addr = $(this).find(".listaddress").html();
				var json = {"title":title, "address" : addr}
				saveAddr.push(json)
			}
		})
		var addresses = { "markers" :saveAddr}
		usamap.AddMarkers(addresses)
	}
	usamap.getAddress();
	$(document).bind("listFiltered", function() {	usamap.getAddress()		})
	/*
	var addresses = { "markers" : [
		{"title":"Title 1", "address" : "1 Learjet Way, Wichita, KS, United States"},
		{"title":"Title 2", "address" : "1 Croton Point Avenue, Croton On Hudson, NY, United States"}
	]}
	*/
	
	var stateFilter = new HelperListFilter({
		"container"	:".sitesListing", 
		"sorting"	:".sort", 
		"filter" 	:['#filter','#state']
	})
})

</script>

</head>

<body>
	
        <div id="gMap"></div>
        <div class="content">
        <h1>Sites in USA</h1>
            <div class="sitesFilter">
            	<form action="" method="get">
                	<label for="filter">Filter By:</label>
                    <select id="filter">
                    	<option value="all" selected="selected">All Business Groups</option>
                        <option value="food">Food</option>
                        <option value="water">Water</option>
                    </select>
                    <select id="state">
                    	<option value="all" selected="selected">All States</option>
                        <option value="california">California</option>
                        <option value="colorado">Colorado</option>
                    </select>
                </form>
                <div class="clear"></div>
            </div>
            <ul class="sitesListing">
            	<li class="sort state california water food">
            		<h5>California</h5>
            		<ul>
            			<li class="sort california water"><strong>Los Angeles</strong></li>
            			<li class="sort getMap california water"><a href="#"> Representative Office</a>
            				<div class="listaddress">251 Wille Road, Des Plaines, IL, United States</div>	
            			</li>
            			<li class="sort getMap california water"><a href="#"> Representative Office</a>
            				<div class="listaddress">1 Learjet Way, Wichita, KS, United States</div>
            			</li>
            			<li class="sort california food"><strong>San Diego</strong></li>
            			<li class="sort getMap california food"><a href="#"> Representative Office</a>
            				<div class="listaddress">1 Croton Point Avenue, Croton On Hudson, NY, United State</div>
            			</li>
            		</ul>
            	</li>
                <li class="sort state colorado water food">
            		<h5>Colorado</h5>
            		<ul>
            			<li class="sort colorado water"><strong>Los Angeles</strong></li>
            			<li class="sort getMap colorado water"><a href="#"> Representative Office</a>
            				<div class="listaddress">100 East Drive, Macon, GA,USA, 31216</div>
            			</li>
            			<li class="sort getMap colorado water"><a href="#"> Representative Office</a>
            				<div class="listaddress">2400 Aviation Way,Bridgeport, WV, USA 26330</div>
            			</li>
            			<li class="sort colorado food"><strong>Los Angeles</strong></li>
            			<li class="sort getMap colorado food"><a href="#"> Representative Office</a>
            				<div class="listaddress">1255 East food Park Blvd., Tucson, AZ, USA 85756</div>
            			</li>
            		</ul>
            	</li>
            </ul>
         
</body>
</html>
